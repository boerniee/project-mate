{% extends "base.html" %}

{% block app_content %}
  <h3>Genie√üe eines unserer {{drinks|length}} leckeren Getr√§nke!</h3>
  <div class="card-deck">

  {% for drink in drinks %}
  <div class="card mb-3" style="max-width: 350px;" onClick="consume({{ drink.id }})">
    <div class="row no-gutters">
      <div class="col-md-4">
        <img src="{{ url_for('static', filename=drink.imageUrl) }}" class="card-img" alt="...">
      </div>
      <div class="col-md-8">
        <div class="card-body">
          <h5 class="card-title">{{ drink.description }}</h5>
          <p class="card-text">{{ drink.getprice() }}</p>
        </div>
      </div>
    </div>
    {% if drink.highlight %}<div class="card-badge">Jetzt probieren!</div>{% endif %}
  </div>
{% endfor %}
</div>

<div class="modal fade" id="myModal">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">SooS</h4>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>
      <div class="modal-body">
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" data-dismiss="modal">OK</button>
      </div>

    </div>
  </div>
</div>
{% endblock %}

{% block custom_script %}
  <script>
    $("#start").addClass('active');
  </script>
  <script>
    function consume(id) {
      $.post("{{ url_for('main.consume', id='id') }}".replace('id', id) )
      .done(function() {
        var modal = $('#myModal');
        modal.find('.modal-body').text('Viel spa√ü mit deinem Getr√§nk!');
        modal.find('.modal-header h4').html('üçªüéâ');
        modal.modal('toggle');
      })
      .fail(function() {
        var modal = $('#myModal');
        modal.find('.modal-body').text('Awups, da ist etwas schief gelaufen!');
        modal.find('.modal-header h4').html('üò©üò©');
        modal.modal('toggle');
      });
    }
  </script>
{% endblock %}
